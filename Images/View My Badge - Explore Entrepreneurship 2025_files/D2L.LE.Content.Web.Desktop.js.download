D2L.LP.Web.UI.Html.Dom.AddClassInitializer('d2l-collapsepane-header',function(node){var expandCollapse=D2L.LP.Web.UI.Html.Dom.GetAttribute(node,'data-onclick');D2L.LP.Web.UI.Html.Dom.RemoveAttribute(node,'data-onclick');D2L.LP.Web.UI.Html.Dom.AddEventListener('click',node,function(){eval(expandCollapse);});D2L.LP.Web.UI.Html.Dom.AddEventListener('toggle',node,function(e){D2L.LP.Web.UI.Html.Dom.CancelEventBubble(e||window.event);D2L.LP.Web.UI.Html.Dom.ToggleClassName('d2l-collapsepane-collapsed',node);});});D2L.LE.Content={Desktop:{}};D2L.LE.Content.Desktop.CompletionMethod={JsFunction:undefined,RegisterHandler:function(jsFunction){this.JsFunction=jsFunction;},CompletionChanged:function(){if(this.JsFunction!==undefined){this.JsFunction.call();}}};D2L.LE.Content.Desktop.ContentObjectDatalistRefreshed={Actions:function(){var that={};var JsFunctions=[];that.RegisterHandler=function(jsFunction){JsFunctions.push(jsFunction);};that.Refreshed=function(){for(var i=0;i<JsFunctions.length;i++){JsFunctions[i].call();JsFunctions.splice(i,1);}};return that;}()};D2L.LE.Content.Desktop.Topic={OpenInNewWindow:function(url){var win=window.open(url,'_blank','noopener');if(win){win.opener=null;win.focus();}}};D2L.LE.Content.Desktop.Lessons=D2L.LE.Content.Desktop.Lessons||{};D2L.LE.Content.Desktop.Lessons.PostMessageRelay={Install:function(){var eventName='lessonsFraClose';window.addEventListener('message',function(e){if(e.data===eventName){window.parent.postMessage(eventName,'*');}});}};D2L.LE.Content.Desktop.Lessons.StyleChanger={StyleShadowGradientDiv:function(){var shadowGradientDiv=document.getElementById('lessonsFraShadowGradientDiv');shadowGradientDiv.className='d2l-navigation-s-shadow-gradient';shadowGradientDiv.style.top='5px';},StyleDropShadowBorderDiv:function(){var dropShadowDiv=document.getElementById('lessonsFraDropShadowBorderDiv');dropShadowDiv.className='d2l-navigation-s-shadow-drop-border';dropShadowDiv.style.position='relative';dropShadowDiv.style.borderTop='1px solid #e3e9f1';}};D2L.LE.Content.Desktop.LessonsDialogs={OnStandardsCoverageLoad:function(){var dialogHeader=document.getElementsByClassName('d2l-dialog-title')[0];setTimeout(function(){if(dialogHeader){dialogHeader.style.minHeight='30px';}},0);var dialogSizeFix=document.createElement('style');dialogSizeFix.textContent=''+'.d2l-dialog-padding { height: 100%; } '+'.d2l-fra-iframe { height: 100%; } '+'iframe { height: 100% !important; }';document.head.appendChild(dialogSizeFix);},OnGenerateContentDialogLoad:function(closeDialogFunction){var dialogSizeFix=document.createElement('style');dialogSizeFix.textContent=''+'.d2l-dialog-padding { height: 100%; } '+'.d2l-fra-iframe { height: 100%; } '+'iframe { height: 100% !important; }';document.head.appendChild(dialogSizeFix);var closeGenerateContentDialog=function(result){closeDialogFunction(result.detail);};document.addEventListener('d2l-gen-ai-dialog-close',closeGenerateContentDialog,{once:true});},OnCopyAssignmentDialogLoad:function(closeDialogFunction){var dialog=window.parent.document.querySelector('.d2l-dialog');var dialogStyle=document.createElement('style');dialogStyle.textContent='.d2l-dialog { height: 80vh !important; }';dialog.appendChild(dialogStyle);window.CloseCopyDialog=function(){closeDialogFunction();delete window.CloseCopyDialog;};},OnClickRedirectToModule:function(closeDialogFunction,contentHref){window.top.location.href=contentHref;closeDialogFunction();}};D2L.LE.Content.Desktop.ContentPublish={TogglePublishMenuItems:function(cmId,key,isVisible){var contentContextMenu=D2L.LP.Web.UI.Html.Dom.GetElementById(cmId);if(contentContextMenu!==null){D2L.LP.Web.UI.Desktop.Controls.ContextMenu.SetItemIsVisible(cmId,key,isVisible);}}};D2L.LE.Content.Desktop.Description=D2L.LE.Content.Desktop.Description||{};D2L.LE.Content.Desktop.Description.GenAI={GenerateOnClick:function(){var summaryDialog=document.body.querySelector("d2l-generate-summary-panel");if(summaryDialog){summaryDialog.opened=true;}var cancelBtn=document.querySelector(".d2l-editable-htmleditor").querySelector("button:last-child");if(cancelBtn){cancelBtn.addEventListener('click',this.UpdateIsSummaryInsertedOnCancel);cancelBtn.addEventListener('click',this.UpdatePanelOnCancel);}},UpdateModuleName:function(name){var summaryDialog=document.body.querySelector("d2l-generate-summary-panel");var summaryAiPanel=document.body.querySelector('d2l-activity-content-module-ai-panel');if(summaryDialog&&name){summaryDialog.moduleName=name;}if(summaryAiPanel&&name){summaryAiPanel.moduleName=name;}},ClearSummary:async function(){var cancelBtn=document.querySelector(".d2l-editable-htmleditor").querySelector("button:last-child");var summaryDialog=document.body.querySelector("d2l-generate-summary-panel");if(cancelBtn){cancelBtn.addEventListener('click',this.UpdatePanelOnCancel);}const descriptionField=document.body.querySelector("d2l-htmleditor");if(descriptionField){if(descriptionField.html!==null){var _document$body$queryS;const dialog=(_document$body$queryS=document.body.querySelector('d2l-activity-content-module-ai-panel'))===null||_document$body$queryS===void 0||(_document$body$queryS=_document$body$queryS.shadowRoot)===null||_document$body$queryS===void 0?void 0:_document$body$queryS.querySelector('#clear-summary');if(dialog){const action=await dialog.open();if(action==="proceed"){descriptionField.html="";descriptionField.setAttribute('ai-origin-pending',0);D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(0,false);if(summaryDialog&&summaryDialog.api&&summaryDialog.api.isSummaryInserted){summaryDialog.api.isSummaryInserted=false;}}}}else{descriptionField.html="";descriptionField.setAttribute('ai-origin-pending',0);D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(0,false);if(summaryDialog&&summaryDialog.api&&summaryDialog.api.isSummaryInserted){summaryDialog.api.isSummaryInserted=false;}}}},InsertSummary:async function(summary){const descriptionField=document.body.querySelector("d2l-htmleditor");if(descriptionField){if(descriptionField.html!==null&&descriptionField.html!==""){var _document$body$queryS2;const dialog=(_document$body$queryS2=document.body.querySelector('d2l-generate-summary-panel'))===null||_document$body$queryS2===void 0||(_document$body$queryS2=_document$body$queryS2.shadowRoot)===null||_document$body$queryS2===void 0?void 0:_document$body$queryS2.querySelector('#replace-description');if(dialog){const action=await dialog.open();if(action==="proceed"){descriptionField.html=summary;descriptionField.setAttribute('ai-origin-pending',3);D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(3,false);}}}else{descriptionField.html=summary;descriptionField.setAttribute('ai-origin-pending',3);D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(3,false);}}},ReadAIOrigin:function(){var descriptionField=document.body.querySelector("d2l-htmleditor");if(descriptionField){var result=descriptionField.getAttribute("ai-origin-pending");D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(result,true);descriptionField.removeAttribute("ai-origin-pending");return result;}return undefined;},SendModuleSummaryAcceptedEvent:function(){var summaryDialog=document.body.querySelector("d2l-generate-summary-panel");if(summaryDialog&&summaryDialog.api.isSummaryInserted){summaryDialog.api.handleSummaryAccepted();summaryDialog.api.isSummaryInserted=false;}},UpdateIsSummaryInsertedOnCancel:function(){var summaryDialog=document.body.querySelector("d2l-generate-summary-panel");if(summaryDialog&&summaryDialog.api&&summaryDialog.api.isSummaryInserted){summaryDialog.api.isSummaryInserted=false;}},ToggleAIPanel:function(aiOriginPending,update){var summaryAiPanel=document.body.querySelector('d2l-activity-content-module-ai-panel');summaryAiPanel.hidden=aiOriginPending==0;if(update){summaryAiPanel.setAttribute('initialAiOrigin',aiOriginPending);}},UpdatePanelOnCancel:function(){var panel=document.body.querySelector('d2l-activity-content-module-ai-panel');if(panel){D2L.LE.Content.Desktop.Description.GenAI.ToggleAIPanel(panel.getAttribute('initialAiOrigin'),false);}}};